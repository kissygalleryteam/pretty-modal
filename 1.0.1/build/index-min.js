KISSY.add("kg/pretty-modal/1.0.1/index",["event","kg/xtemplate/3.3.3/runtime","base","node","kg/pretty-modal/1.0.1/pmbase.css","kg/pretty-modal/1.0.1/pmeffects.css"],function(e,t,n,a){{var r,o,l=(t("event"),t("kg/xtemplate/3.3.3/runtime")),m=t("base"),i=t("node");t("kg/pretty-modal/1.0.1/pmbase.css"),t("kg/pretty-modal/1.0.1/pmeffects.css")}r=function(e){var t=e=function(e){{var t,n=this,a=n.root,r=n.buffer,o=n.scope,l=(n.runtime,n.name,n.pos),m=o.data,i=o.affix,p=a.nativeCommands,s=a.utils;s.callFn,s.callCommand,p.range,p.foreach,p.forin,p.each,p["with"],p["if"],p.set,p.include,p.parse,p.extend,p.block,p.macro,p["debugger"]}r.data+='<div class="pm-modal">\n	<div class="pm-content">\n		<h3>',l.line=3;var c=(t=i.$pmTitle)!==e?t:(t=m.$pmTitle)!==e?t:o.resolveLooseUp(["$pmTitle"]);r=r.write(c),r.data+="</h3>\n		<div>\n			",l.line=5;var d=(t=i.$pmContent)!==e?t:(t=m.$pmContent)!==e?t:o.resolveLooseUp(["$pmContent"]);return r=r.write(d),r.data+='\n			<button class="pm-close">Close me!</button>\n		</div>\n	</div>\n</div>',r};return t.TPL_NAME=a.id||a.name,e}(),o=function(t){var n=i.all,a=l,o=m,p=r,s=o.extend({initializer:function(){},render:function(){var t=this,r=t.get("$target"),o=t.get("pmTitle"),l=t.get("pmContent");n(document).delegate("click",".pm-trigger",function(e){var m=e.srcElement||e.target,i=n(m).attr("data-effect");t.set("effect",i);var p=t.get("$overlay"),s=n(new a(t.get("pmTpl")).render({$pmTitle:o,$pmContent:l}));t.set("$pm",s),s.addClass(i),r.append(s),r.append(p),s.css({"margin-left":(s.width()-n(window).width())/2,"margin-top":(s.height()-n(window).height())/2})}),n(document).delegate("click",".pm-close",function(n){$pm=t.get("$pm"),$overlay=t.get("$overlay"),effect=t.get("effect"),$pm.removeClass(effect);var a=effect+"-next";$pm.addClass(a),e.later(function(){$pm.remove(),$overlay.remove()},1e3)})}},{ATTRS:{pmTpl:{value:p},$overlay:{value:'<div class="pm-overlay"></div>',getter:function(e){return n(e)}},$pm:{value:""},effect:{value:""},$target:{value:"",getter:function(e){return n(e)}},htmlBase:{value:!1},pmTitle:{},pmContent:{}}});return t=s}(),a.exports=o});